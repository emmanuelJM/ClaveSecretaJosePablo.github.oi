<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clave Secreta de JP</title>
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <link rel="icon" href="img/icon.ico" type="image/x-icon">

    <style>
        /* Otros estilos */


    </style>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body class="bg-light">

  <div class="row align-items-start">
    
    <div class="col-sm-4">
      
<div class="card p-4">

<h2>Resultado Caja</h2>    
<div id="resultado">
        <span id="digito1-res" class="resultado-adivinado">X</span>
        <span id="digito2-res" class="resultado-adivinado">X</span>
        <span id="digito3-res" class="resultado-adivinado">X</span>
        <span id="digito4-res" class="resultado-adivinado">X</span>
        <span id="digito5-res" class="resultado-adivinado">X</span>
        <span id="digito6-res" class="resultado-adivinado">X</span>
    </div>
  
 </div>

<div class="card p-4">
    <h2>Código Secreto</h2>
    <div id="codigo-input">
        <input type="password" maxlength="1" id="digito1">
        <input type="password" maxlength="1" id="digito2">
        <input type="password" maxlength="1" id="digito3">
        <input type="password" maxlength="1" id="digito4">
        <input type="password" maxlength="1" id="digito5">
        <input type="password" maxlength="1" id="digito6">
    </div>
  
    <div class="row">
    <button id="guardar" class="btn btn-primary w-100">Guardar Código</button>
    <button id="limpiar" class="btn btn-primary w-100">Limpiar Código</button>
</div>  
  
</div>


<div class="card p-4">
    <h2>Adivina el código</h2>
    <div id="adivinanza-input">
        <input type="text" maxlength="1" id="adivina1">
        <input type="text" maxlength="1" id="adivina2">
        <input type="text" maxlength="1" id="adivina3">
        <input type="text" maxlength="1" id="adivina4">
        <input type="text" maxlength="1" id="adivina5">
        <input type="text" maxlength="1" id="adivina6">
    </div>
    <button id="adivinar" class="btn btn-primary w-100">Adivinar</button>
  
  </div>
</div>
    
    <div class="col-sm">
        <div class="card p-4">
                        <h2 class="mb-4">Secuencia Ganadora</h2>
                        <div class="winner sequence hidden" id="secret-sequence">
                            <span id="secret-num1">X</span>
                            <span id="secret-num2">X</span>
                            <span id="secret-num3">X</span>
                            <span id="secret-num4">X</span>
                            <span id="secret-num5">X</span>
                            <span id="secret-num6">X</span>
                        </div>
                        <div id="game-over-message">Perdiste</div>
                        <div id="win-message">¡Ganaste!</div>
                    </div>
                    <button class="btn btn-danger w-100 mt-4" id="restart-btn" style="display:none;" onclick="restartGame()">Reiniciar</button>
        <div class="card p-4" id="set-numbers">
                        <h2 class="mb-4">Establecer secuencia</h2>
                        <div class="mb-3">
                            <input type="password" id="num1" class="form-control d-inline-block" maxlength="1" oninput="moveToNext(this, 'num2')" onkeypress="checkEnter(event, setSequence)" style="width: 15%;font-size: 30px;font-weight: 900;text-align: center;">
                            <input type="password" id="num2" class="form-control d-inline-block" maxlength="1" oninput="moveToNext(this, 'num3')" onkeypress="checkEnter(event, setSequence)" style="width: 15%;font-size: 30px;font-weight: 900;text-align: center;">
                            <input type="password" id="num3" class="form-control d-inline-block" maxlength="1" oninput="moveToNext(this, 'num4')" onkeypress="checkEnter(event, setSequence)" style="width: 15%;font-size: 30px;font-weight: 900;text-align: center;">
                            <input type="password" id="num4" class="form-control d-inline-block" maxlength="1" oninput="moveToNext(this, 'num5')" onkeypress="checkEnter(event, setSequence)" style="width: 15%;font-size: 30px;font-weight: 900;text-align: center;">
                            <input type="password" id="num5" class="form-control d-inline-block" maxlength="1" oninput="moveToNext(this, 'num6')" onkeypress="checkEnter(event, setSequence)" style="width: 15%;font-size: 30px;font-weight: 900;text-align: center;">
                            <input type="password" id="num6" class="form-control d-inline-block" maxlength="1" oninput="moveToNext(this, 'none')" onkeypress="checkEnter(event, setSequence)" style="width: 15%;font-size: 30px;font-weight: 900;text-align: center;">
                        </div>
                        <button class="btn btn-primary w-100" onclick="setSequence()">Establecer Secuencia</button>
                    </div>
                    <div class="card p-4" id="guess-numbers" style="display:none;">
                        <h2 class="mb-4">Adivina la secuencia:</h2>
                        <div class="mb-3">
                            <input type="text" id="gnum1" class="form-control d-inline-block" maxlength="1" oninput="moveToNext(this, 'gnum2')" onkeypress="checkEnter(event, checkGuess)" style="width: 15%;font-size: 30px;font-weight: 900;text-align: center;">
                            <input type="text" id="gnum2" class="form-control d-inline-block" maxlength="1" oninput="moveToNext(this, 'gnum3')" onkeypress="checkEnter(event, checkGuess)" style="width: 15%;font-size: 30px;font-weight: 900;text-align: center;">
                            <input type="text" id="gnum3" class="form-control d-inline-block" maxlength="1" oninput="moveToNext(this, 'gnum4')" onkeypress="checkEnter(event, checkGuess)" style="width: 15%;font-size: 30px;font-weight: 900;text-align: center;">
                            <input type="text" id="gnum4" class="form-control d-inline-block" maxlength="1" oninput="moveToNext(this, 'gnum5')" onkeypress="checkEnter(event, checkGuess)" style="width: 15%;font-size: 30px;font-weight: 900;text-align: center;">
                            <input type="text" id="gnum5" class="form-control d-inline-block" maxlength="1" oninput="moveToNext(this, 'gnum6')" onkeypress="checkEnter(event, checkGuess)" style="width: 15%;font-size: 30px;font-weight: 900;text-align: center;">
                            <input type="text" id="gnum6" class="form-control d-inline-block" maxlength="1" oninput="moveToNext(this, 'none')" onkeypress="checkEnter(event, checkGuess)" style="width: 15%;font-size: 30px;font-weight: 900;text-align: center;">
                        </div>
                        <button class="btn btn-primary w-100" onclick="checkGuess()">Adivinar</button>
                    </div>
                <div class="col center-image">
                    <img src="https://i.postimg.cc/DzX4FjgX/Frame-30-3.png" alt="Furry white cat sitting on a wall" style="width: 40%; margin: 0; position: relative;">
                </div>
      
    </div>
    
    <div class="col-sm-3">
      
      <div id="contador">40</div>
    <button id="iniciar">Iniciar</button> 
      
          <div id="lost-turn-message" style="color: red; font-size: 20px; display: none;">Perdió un turno</div>
        <div class="attempts" id="attempts" style="display:none;"></div>
      
    </div>
  </div>

    <script>
        let secretSequence = [];
        let attempts = [];
        const maxAttempts = 12; // Número máximo de intentos
        let attemptCount = 0;

        function setSequence() {
            secretSequence = [
                document.getElementById('num1').value,
                document.getElementById('num2').value,
                document.getElementById('num3').value,
                document.getElementById('num4').value,
                document.getElementById('num5').value,
                document.getElementById('num6').value
            ];
            document.getElementById('set-numbers').style.display = 'none';
            document.getElementById('guess-numbers').style.display = 'block';
            document.getElementById('secret-sequence').classList.remove('hidden');
            clearGuessFields(); // Limpiar los campos de entrada de adivinanza al establecer la secuencia
        }

        function checkGuess() {
            if (attemptCount >= maxAttempts) {
                return; // No permitir más intentos después del límite
            }

            const guessSequence = [
                document.getElementById('gnum1').value,
                document.getElementById('gnum2').value,
                document.getElementById('gnum3').value,
                document.getElementById('gnum4').value,
                document.getElementById('gnum5').value,
                document.getElementById('gnum6').value
            ];

            let guessText = '';

            for (let i = 0; i < 6; i++) {
                const guessNum = guessSequence[i];
                const isCorrect = guessNum === secretSequence[i];
                
                guessText += `<span class="${isCorrect ? 'correct-guess' : 'incorrect-guess'}">${guessNum}</span> `;
                
                if (isCorrect) {
                    document.getElementById(`secret-num${i + 1}`).innerText = guessNum; // Revelar número correcto en Secuencia Ganadora
                }
            }

            const attemptElement = document.createElement('div');
            attemptElement.classList.add('attempt');
            attemptElement.innerHTML = `<strong>Intento:</strong> ${guessText}`;
            document.getElementById('attempts').insertBefore(attemptElement, document.getElementById('attempts').firstChild);
            document.getElementById('attempts').style.display = 'block';

            // Limpiar campos de entrada después de cada intento
            clearGuessFields();

            attemptCount++; // Incrementar el contador de intentos

            // Verificar si el jugador adivinó correctamente
            if (JSON.stringify(guessSequence) === JSON.stringify(secretSequence)) {
                document.getElementById('secret-sequence').classList.remove('hidden');
                document.getElementById('restart-btn').style.display = 'block';
                document.getElementById('guess-numbers').style.display = 'none';
                document.getElementById('win-message').style.display = 'block'; // Mostrar mensaje de "Ganaste"
                disableInputs(); // Deshabilitar los inputs

                // Mostrar confeti
                showConfetti();
            } else if (attemptCount >= maxAttempts) {
                // Mostrar mensaje de pérdida, revelar la secuencia y ocultar el botón de reinicio
                document.getElementById('secret-sequence').classList.remove('hidden');
                document.getElementById('game-over-message').style.display = 'block'; // Mostrar mensaje de "Perdiste"
                document.getElementById('restart-btn').style.display = 'block';
                document.getElementById('guess-numbers').style.display = 'none';

                // Revelar la secuencia secreta en la sección correspondiente
                for (let i = 0; i < 6; i++) {
                    document.getElementById(`secret-num${i + 1}`).innerText = secretSequence[i];
                }
            }
        }

        function clearGuessFields() {
            for (let i = 1; i <= 6; i++) {
                document.getElementById(`gnum${i}`).value = '';
            }
        }

        // Función para mover el foco al siguiente input
        function moveToNext(currentInput, nextInputId) {
            if (currentInput.value.length === currentInput.maxLength) {
                if (nextInputId !== 'none') {
                    document.getElementById(nextInputId).focus();
                }
            }
        }

        // Función para verificar si se presionó Enter
        function checkEnter(event, actionFunction) {
            if (event.key === 'Enter') {
                actionFunction();
            }
        }

        function restartGame() {
            secretSequence = [];
            attempts = [];
            attemptCount = 0; // Resetear el contador de intentos
            document.getElementById('set-numbers').style.display = 'block';
            document.getElementById('guess-numbers').style.display = 'none';
            document.getElementById('restart-btn').style.display = 'none';
            document.getElementById('secret-sequence').classList.add('hidden');
            document.getElementById('game-over-message').style.display = 'none'; // Ocultar el mensaje de "Perdiste"
            document.getElementById('win-message').style.display = 'none'; // Ocultar el mensaje de "Ganaste"
            document.getElementById('attempts').innerHTML = '';

            // Resetear los campos de la secuencia secreta
            for (let i = 1; i <= 6; i++) {
                const secretNumElement = document.getElementById(`secret-num${i}`);
                secretNumElement.innerText = 'X';
                document.getElementById(`num${i}`).value = ''; // Limpiar los campos
                document.getElementById(`gnum${i}`).value = ''; // Limpiar los campos de adivinanza
                document.getElementById(`gnum${i}`).disabled = false; // Habilitar los campos de adivinanza
            }

            // Limpiar confeti
            document.getElementById('confetti').innerHTML = '';
        }

        function disableInputs() {
            for (let i = 1; i <= 6; i++) {
                document.getElementById(`gnum${i}`).disabled = true;
            }
        }

        function showConfetti() {
            const confettiContainer = document.getElementById('confetti');
            for (let i = 0; i < 100; i++) {
                const confetti = document.createElement('div');
                confetti.classList.add('confetti-piece');
                confetti.style.backgroundColor = `hsl(${Math.random() * 360}, 100%, 50%)`;
                confetti.style.left = `${Math.random() * 100}%`;
                confetti.style.top = `${Math.random() * 100}%`;
                confetti.style.opacity = '1';
                confetti.style.transform = `translateY(${Math.random() * 100}px) rotate(${Math.random() * 360}deg)`;
                confetti.style.animation = `revealCorrect ${Math.random() * 3 + 2}s ease-in-out forwards`;
                confettiContainer.appendChild(confetti);
            }
        }
    </script>

<script src="js/script.js"></script>

    <!-- Bootstrap JS (optional) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>

